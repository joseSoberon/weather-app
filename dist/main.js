(()=>{"use strict";function e(e){return Math.floor(100*e)/100}function t(e){let t=document.querySelector("main"),n=document.createElement("div");n.classList.add("city-info");let a=document.createElement("p");a.setAttribute("id","city"),a.textContent=e,n.appendChild(a);let c=document.createElement("p");c.setAttribute("id","date"),function(e){const t=new Date,n=t.getDate(),a=t.getMonth()+1,c=t.getFullYear();e.textContent=`${n}-${a}-${c}`}(c),n.appendChild(c),t.appendChild(n)}function n(t,n){let a=document.querySelector("main"),c=document.createElement("div");c.classList.add("city-weather");let i=document.createElement("div"),o=document.createElement("p");o.setAttribute("id","description"),o.textContent=t.description,i.appendChild(o),c.appendChild(i);let d=document.createElement("div");d.classList.add("temperature-div");let l=document.createElement("p");l.textContent="Temp: ";let r=document.createElement("span");var s;r.classList.add("temperatures"),r.classList.add("celcius"),r.textContent=`${s=n.temp,e(s-273.15)}`;let p=document.createElement("span");p.classList.add("symbol"),p.textContent=" C",l.appendChild(r),l.appendChild(p),d.appendChild(l),c.appendChild(d),a.appendChild(c)}function a(){let t=document.querySelector("body"),n=document.createElement("div");n.classList.add("converter");let a=document.createElement("button");a.textContent="Convert to Farenheit",a.addEventListener("click",(()=>{document.querySelectorAll(".temperatures").forEach((t=>{let n=document.querySelector(".symbol");t.classList.contains("celcius")?(t.classList.remove("celcius"),t.classList.add("farenheit"),t.textContent=e(1.8*t.textContent+32),n.textContent=" F"):t.classList.contains("farenheit")&&(t.classList.remove("farenheit"),t.classList.add("celcius"),t.textContent=e(5/9*(t.textContent-32)),n.textContent=" C")}))})),n.appendChild(a),t.appendChild(n)}function c(){let e=document.querySelector("main"),a=document.createElement("div");a.classList.add("searchbar");let i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("placeholder","Search City");let o=document.createElement("button");o.setAttribute("id","search-button"),o.textContent="Search",o.addEventListener("click",(()=>{""!=i.value&&(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),async function(e){let a="8a1dfe2baf222a773618cc95daa29f42",i=`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${a}`;try{let e=await fetch(i,{mode:"cors"}),o=await e.json(),d=`https://api.openweathermap.org/data/2.5/weather?lat=${o[0].lat}&lon=${o[0].lon}&appid=${a}`,l=await fetch(d,{mode:"cors"}),r=await l.json();t(o[0].name),n(r.weather[0],r.main),c()}catch(e){console.log("City not found"),c()}}(i.value))})),a.appendChild(i),a.appendChild(o),e.appendChild(a)}navigator.geolocation.getCurrentPosition((e=>{let i=e.coords.latitude,o=e.coords.longitude;fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${i}&lon=${o}&appid=8a1dfe2baf222a773618cc95daa29f42`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t(e.name),n(e.weather[0],e.main),a(e.main.temp),c()}))}),(()=>{fetch("https://api.openweathermap.org/data/2.5/weather?lat=44.34&lon=10.99&appid=8a1dfe2baf222a773618cc95daa29f42",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t(e.name),n(e.weather[0],e.main),a(e.main.temp),c()}))}))})();